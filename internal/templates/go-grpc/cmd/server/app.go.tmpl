package main

// This file contains helpers to initialize application code that is specific to this service
import (
{{if .UseDB}}
	"github.com/caring/{{tolower .Name}}/internal/db"
{{end}}
	"github.com/caring/go-packages/pkg/logging"
)

{{if .UseDB}}
// initialize the store service
func initStore(logger *logging.Logger, connectionString string) *db.Store {
	logger.Debug("Initializing Store")
	// establish a store and connection to the db
	store, err := db.NewStore(connectionString)
	if err != nil {
		logger.Fatal("Failed to initialize store:" + err.Error())
	}
	logger.Debug("Store established with database connection")
	return store
}
{{end}}
